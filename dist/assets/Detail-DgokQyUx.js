import{a as e,f as s,g as r,s as a,c as l,e as o,j as t}from"./index-DEHlzSyC.js";import{g as c,u as i,r as n}from"./react-BiDznpw8.js";import{I as d,T as m,U as x}from"./UnifiedCard-VZjr-8cA.js";import{P as h}from"./PillButton-B0eD97jM.js";import{V as p}from"./VectorMap-CME1Ukzp.js";import{A as y}from"./ui-BNU3Anyi.js";import"./animation-BGH1bKEe.js";const v=(e,s)=>{const r=Math.floor(e/60),a=e%60;return"ja"===s?0===r?`${a}分`:0===a?`${r}時間`:`${r}時間${a}分`:0===r?`${a} min`:0===a?`${r} hr`:`${r} hr ${a} min`},g=o,u=l,j=r,b=a,f=()=>{const{id:r,type:a}=c(),{t:l}=e(),{isBookmarked:o,toggleBookmark:f}=s(),N=i(),[k,w]=n.useState(null),[C,$]=n.useState(!0),[I,B]=n.useState(null),[D,S]=n.useState([]);n.useEffect(()=>{if($(!0),B(null),!a||!r)return B("Missing type or ID"),void $(!1);let e;switch(a){case"event":e=g.find(e=>e.id===r);break;case"exhibit":e=u.find(e=>e.id===r);break;case"stall":e=b.find(e=>e.id===r);break;case"sponsor":e=j.find(e=>e.id===r);break;default:return B(`Invalid type: ${a}`),void $(!1)}if(e){if(w(e),e.tags&&e.tags.length>0){const s=[...g,...u,...b,...j].filter(s=>s.id!==e.id&&s.tags&&s.tags.some(s=>{var r;return null==(r=e.tags)?void 0:r.includes(s)})).slice(0,6);S(s)}}else B(`Item not found: ${r}`);$(!1)},[a,r]);const U=()=>{N(-1)},z=e=>{N(`/search?tag=${encodeURIComponent(e)}`)};return C?t.jsx("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:t.jsx("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:t.jsx("div",{className:"py-12 text-center",children:t.jsx("p",{className:"text-lg",style:{color:"var(--color-text-primary)"},children:l("loading")})})})}):I||!k?t.jsx("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:t.jsx("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"py-12 text-center",children:[t.jsx("p",{className:"mb-6 text-lg",style:{color:"var(--color-text-primary)"},children:l("errors.itemNotFound")}),t.jsx("button",{onClick:U,className:"rounded-lg px-6 py-3 font-medium transition-all duration-200 hover:scale-105",style:{backgroundColor:"var(--color-accent)",color:"white"},children:l("detail.back")})]})})}):t.jsx("div",{className:"min-h-screen",children:t.jsx("section",{className:"section",style:{backgroundColor:"var(--color-bg-primary)"},children:t.jsxs("div",{className:"mx-auto max-w-7xl",children:[t.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[t.jsx(h,{onClick:U,variant:"secondary",children:t.jsxs("span",{className:"inline-flex items-center gap-2 whitespace-nowrap",children:[t.jsx(y,{className:"h-4 w-4"}),t.jsx("span",{children:l("detail.back")})]})}),t.jsx("button",{onClick:()=>{k&&f(k.id)},className:"flex h-12 w-12 items-center justify-center rounded-full transition-all duration-200 hover:scale-110 focus:ring-2 focus:ring-offset-2 focus:outline-none "+(o(k.id)?"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500":"border border-[var(--border-color)] bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:bg-[var(--bg-tertiary)] hover:text-[var(--text-primary)] focus:ring-[var(--primary-color)]"),"aria-label":o(k.id)?l("actions.removeBookmark"):l("actions.bookmark"),title:o(k.id)?l("actions.removeBookmark"):l("actions.bookmark"),children:t.jsx("span",{className:"text-xl",children:o(k.id)?"★":"☆"})})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.jsx(d,{type:k.type,size:"large"}),t.jsx("span",{className:"rounded-full px-3 py-1 text-sm font-medium",style:{backgroundColor:"var(--color-accent)",color:"white"},children:(()=>{switch(k.type){case"event":return l("detail.event");case"exhibit":return l("detail.exhibit");case"stall":return l("detail.stall");case"sponsor":return l("detail.sponsor");default:return""}})()})]}),t.jsx("h1",{className:"mb-6 text-3xl font-bold",style:{color:"var(--color-text-primary)"},children:k.title}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg p-6 md:grid-cols-3",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.date"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:k.date})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.time"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:k.time})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.location"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:k.location})]})]}),k.imageUrl&&t.jsx("div",{className:"overflow-hidden rounded-lg border border-white/10 bg-white/5",children:t.jsx("img",{src:k.imageUrl,alt:k.title,className:"h-auto w-full object-cover",style:{backgroundColor:"var(--color-bg-secondary)"}})}),t.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 flex items-center gap-2 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.location")}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-lg",style:{color:"var(--color-text-primary)"},children:k.location}),k.coordinates&&t.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["座標: (",k.coordinates.x.toFixed(0),","," ",k.coordinates.y.toFixed(0),")"]})]})]}),t.jsx("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:t.jsx("p",{className:"text-lg leading-relaxed",style:{color:"var(--color-text-primary)"},children:k.description})}),(()=>{switch(k.type){case"event":{const e=k;return t.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.eventDetails")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.organizer"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:e.organizer})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.duration"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:v(e.duration,l("language"))})]})]})]})}case"exhibit":{const e=k;return t.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.exhibitDetails")}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.creator"),":"]}),t.jsx("span",{style:{color:"var(--color-text-secondary)"},children:e.creator})]})})]})}case"stall":{const e=k;return t.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.stallDetails")}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.products"),":"]}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.products.map((e,s)=>t.jsx("span",{className:"rounded px-2 py-1 text-sm",style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text-secondary)"},children:e},s))})]})})]})}case"sponsor":{const e=k;return t.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.sponsorDetails")}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[l("detail.website"),":"]}),t.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"var(--color-accent)"},children:e.website})]})})]})}default:return null}})(),k.tags&&k.tags.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.tags")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:k.tags.map((e,s)=>t.jsx(m,{tag:e,onClick:z},s))})]}),(k.location||k.coordinates)&&"sponsor"!==k.type&&t.jsxs("div",{className:"rounded-lg border border-white/20 bg-white/10 p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 flex items-center gap-2 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("map.title")}),t.jsx("div",{className:"map-container h-64 overflow-hidden rounded-lg",children:t.jsx(p,{mode:"detail",highlightPoint:k.coordinates,points:k.coordinates?[{contentItem:k,coordinates:k.coordinates,id:k.id,isHovered:!1,isSelected:!0,onClick:()=>{},onHover:()=>{},title:k.title,type:k.type}]:[],height:"100%",maxZoom:8,minZoom:.3,showControls:!0},`detail-map-${k.id}`)})]}),D.length>0&&t.jsxs("div",{className:"rounded-lg border border-white/20 bg-white/10 p-6",style:{backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h3",{className:"mb-4 text-xl font-semibold",style:{color:"var(--color-text-primary)"},children:l("detail.related")}),t.jsx("div",{className:"overflow-x-auto scrollbar-thin",children:t.jsx("div",{className:"flex gap-4 pb-2",style:{minWidth:"max-content"},children:D.map(e=>t.jsx("div",{className:"w-64 flex-shrink-0",children:t.jsx(x,{item:e,showTags:!0,variant:"compact"})},e.id))})})]})]})]})})})};export{f as default};
