import{a as E,l as D,c as K,r as d,m as T,E as R,D as C,j as e,n as $,u as L,b as q,o as W,e as G,f as V,s as J,k as X}from"./index-BiXXeQ0D.js";import{C as Y,a as k}from"./CardListToggle-Cxv4F212.js";import{T as Z}from"./TagFilter-BVafVQ93.js";import"./UnifiedCard-DLtq07NS.js";const _=({variant:t="default",placeholder:h,autoFocus:j=!1,showSuggestions:r=!1,className:p=""})=>{const{t:l}=E(),{searchQuery:m,setSearchQuery:b,performSearch:n,recentSearches:N}=D(),f=K(),[g,v]=d.useState(m),[a,c]=d.useState(!1),[u,i]=d.useState(-1),x=d.useRef(null),w=d.useRef(null),S=d.useRef(null),I=d.useRef(null);d.useEffect(()=>{j&&x.current&&x.current.focus()},[j]),d.useEffect(()=>{v(m)},[m]),d.useEffect(()=>{w.current&&(a?T.to(w.current,{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",borderColor:"var(--primary-color)",duration:C.FAST,ease:R.SMOOTH}):T.to(w.current,{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",borderColor:"var(--border-color)",duration:C.FAST,ease:R.SMOOTH}))},[a]),d.useEffect(()=>{S.current&&(a?T.fromTo(S.current,{y:-10,autoAlpha:0},{y:0,autoAlpha:1,duration:C.FAST,ease:R.SMOOTH}):T.to(S.current,{y:-10,autoAlpha:0,duration:C.FAST,ease:R.SMOOTH}))},[a]);const O=s=>{const o=s.target.value;v(o),b(o),i(-1),r&&o.trim()?c(!0):c(!1)},F=s=>{s.preventDefault(),g.trim()&&(n(g.trim()),f(`/search?q=${encodeURIComponent(g.trim())}`),c(!1))},M=s=>{v(s),b(s),n(s),f(`/search?q=${encodeURIComponent(s)}`),c(!1)},Q=s=>{if(!a)return;const o=N;switch(s.key){case"ArrowDown":s.preventDefault(),i(y=>y<o.length-1?y+1:y);break;case"ArrowUp":s.preventDefault(),i(y=>y>0?y-1:y);break;case"Enter":s.preventDefault(),u>=0&&o[u]?M(o[u]):F(s);break;case"Escape":c(!1),i(-1);break}},U=()=>{r&&g.trim()&&c(!0)},z=s=>{setTimeout(()=>{var o;!((o=I.current)!=null&&o.contains(s.relatedTarget))&&s.relatedTarget!==x.current&&(c(!1),i(-1))},150)},B=()=>{v(""),b(""),c(!1),x.current&&x.current.focus()},P=()=>{const s=`
      w-full pl-12 border transition-all duration-200 focus:outline-none focus:ring-2
      bg-[var(--bg-primary)] border-[var(--border-color)] text-[var(--text-primary)]
      placeholder-[var(--text-secondary)] focus:border-[var(--primary-color)] 
      focus:ring-[var(--primary-color)]/20
    `,o=g.trim()?"pr-32":"pr-20";switch(t){case"large":return`${s} ${o} py-4 text-lg rounded-full focus:ring-4`;case"inline":return`${s} ${o} py-2 text-sm rounded-full`;default:return`${s} ${o} py-3 text-base rounded-full`}},H=()=>{switch(t){case"large":return 24;case"inline":return 16;default:return 20}},A=r?N:[];return e.jsxs("div",{className:`relative w-full ${p}`,children:[e.jsx("form",{ref:w,onSubmit:F,className:"relative w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10",children:e.jsx($,{size:H(),className:"text-[var(--text-secondary)]"})}),e.jsx("input",{ref:x,type:"text",value:g,onChange:O,onKeyDown:Q,onFocus:U,onBlur:z,placeholder:h||l("search.placeholder"),className:P(),autoComplete:"off",role:"searchbox","aria-label":l("search.placeholder"),"aria-expanded":a,"aria-haspopup":"listbox"}),g.trim()&&e.jsx("button",{type:"button",onClick:B,className:"absolute right-20 top-1/2 transform -translate-y-1/2 p-1 rounded-full transition-all duration-200 hover:bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]","aria-label":l("actions.clear"),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-4 py-2 bg-[var(--primary-color)] text-white rounded-full font-medium transition-all duration-200 hover:shadow-lg hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/20 hover:bg-[var(--primary-color)]/90","aria-label":l("actions.search"),children:l("actions.search")})]})}),a&&A.length>0&&e.jsx("div",{ref:I,className:"absolute top-full left-0 right-0 mt-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:e.jsx("div",{ref:S,className:"py-2",role:"listbox","aria-label":l("search.suggestions"),children:A.map((s,o)=>e.jsxs("button",{onClick:()=>M(s),className:`w-full text-left px-4 py-3 flex items-center gap-3 transition-all duration-200 ${u===o?"bg-[var(--bg-tertiary)] text-[var(--primary-color)]":"text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,role:"option","aria-selected":u===o,children:[e.jsx($,{size:16,className:"text-[var(--text-secondary)]"}),e.jsx("span",{className:"flex-1",children:s}),e.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:l("search.recentSearches")})]},o))})})]})},ee=()=>{const{searchQuery:t,searchResults:h,isSearching:j}=D(),{t:r}=E(),{selectedTags:p}=L(),{filterByTags:l}=q(),[m,b]=d.useState("default"),[n,N]=d.useState({events:[],exhibits:[],stalls:[]}),f=d.useCallback(a=>p.length===0?a:a.filter(c=>p.every(u=>{var i;return(i=c.tags)==null?void 0:i.includes(u)})),[p]);d.useEffect(()=>{const a=t.trim();let c=h;a||(c=p.length>0?l(p):[]);const u=p.length>0?f(c):c,i={events:[],exhibits:[],stalls:[]};u.forEach(x=>{x.type==="event"?i.events.push(x):x.type==="exhibit"?i.exhibits.push(x):x.type==="stall"&&i.stalls.push(x)}),N(i)},[h,f,p,t,l]);const g=(a,c)=>{if(!c.trim()||!a)return e.jsx(e.Fragment,{children:a});try{const u=a.split(new RegExp(`(${c})`,"gi"));return e.jsx(e.Fragment,{children:u.map((i,x)=>i.toLowerCase()===c.toLowerCase()?e.jsx("mark",{className:"bg-gradient-to-r from-[var(--accent-yellow)] to-[var(--accent-orange)] text-[var(--text-primary)] px-1 rounded",children:i},x):i)})}catch(u){return console.error("Error highlighting text:",u),e.jsx(e.Fragment,{children:a})}},v=n.events.length+n.exhibits.length+n.stalls.length;return j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[var(--primary-color)] border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("span",{className:"text-[var(--text-secondary)]",children:r("search.searching")})]}):!t&&p.length===0?e.jsx("div",{className:"text-center py-12 text-[var(--text-secondary)]",children:e.jsx("p",{children:r("search.searchPrompt")})}):v===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--text-primary)] mb-2",children:r("search.noResults")}),e.jsx("p",{className:"text-[var(--text-secondary)]",children:r("search.tryDifferentKeywords")})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 p-6 bg-[var(--bg-secondary)] rounded-xl border border-[var(--border-color)]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--text-primary)]",children:r("search.results")}),v>0&&e.jsxs("span",{className:"px-3 py-1 bg-[var(--primary-color)] text-white rounded-full text-sm font-medium",children:[v," ",r("search.items")]})]}),e.jsx(Y,{viewMode:m,setViewMode:b})]}),e.jsxs("div",{className:"space-y-8",children:[n.events.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-[var(--accent-purple)] to-[var(--accent-pink)] rounded-full"}),e.jsxs("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:["ðŸŽ­ ",r("navigation.events")]}),e.jsx("div",{className:"flex-1 h-px bg-[var(--border-color)]"}),e.jsxs("span",{className:"text-sm text-[var(--text-secondary)] bg-[var(--bg-secondary)] px-3 py-1 rounded-full",children:[n.events.length," ",r("search.items")]})]}),e.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-6",children:e.jsx(k,{items:n.events,variant:m,showTags:!0,showDescription:m==="list",highlightText:a=>g(a,t),emptyMessage:r("events.noEventsFound"),filterType:"all"})})]}),n.exhibits.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-[var(--accent-blue)] to-[var(--accent-teal)] rounded-full"}),e.jsxs("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:["ðŸŽ¨ ",r("exhibits.filters.exhibits")]}),e.jsx("div",{className:"flex-1 h-px bg-[var(--border-color)]"}),e.jsxs("span",{className:"text-sm text-[var(--text-secondary)] bg-[var(--bg-secondary)] px-3 py-1 rounded-full",children:[n.exhibits.length," ",r("search.items")]})]}),e.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-6",children:e.jsx(k,{items:n.exhibits,variant:m,showTags:!0,showDescription:m==="list",highlightText:a=>g(a,t),emptyMessage:r("exhibits.noExhibits"),filterType:"all"})})]}),n.stalls.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-[var(--accent-orange)] to-[var(--accent-red)] rounded-full"}),e.jsxs("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:["ðŸœ ",r("exhibits.filters.stalls")]}),e.jsx("div",{className:"flex-1 h-px bg-[var(--border-color)]"}),e.jsxs("span",{className:"text-sm text-[var(--text-secondary)] bg-[var(--bg-secondary)] px-3 py-1 rounded-full",children:[n.stalls.length," ",r("search.items")]})]}),e.jsx("div",{className:"bg-[var(--bg-secondary)] rounded-xl p-6",children:e.jsx(k,{items:n.stalls,variant:m,showTags:!0,showDescription:m==="list",highlightText:a=>g(a,t),emptyMessage:r("exhibits.noStalls"),filterType:"all"})})]})]})]})},se=t=>t.replace(/^\.?\/?images\//,"./images/");function ae(){const t=[...G.map(h=>h.imageUrl),...V.map(h=>h.imageUrl),...J.map(h=>h.imageUrl),...X.map(h=>h.imageUrl)].filter(Boolean).map(se);return t[Math.floor(Math.random()*t.length)]||""}const ce=()=>{const{searchQuery:t,setSearchQuery:h,performSearch:j,searchResults:r}=D(),{selectedTags:p}=L(),{t:l}=E(),m=W(),b=d.useMemo(()=>ae(),[]),n=t.trim().length>0||p.length>0||r.length>0;return d.useEffect(()=>{const f=new URLSearchParams(m.search).get("q");f&&f!==t&&(h(f),j(f))},[m.search]),e.jsxs("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[e.jsxs("section",{className:"relative overflow-hidden py-16",children:[e.jsx("img",{src:b,className:"absolute inset-0 w-full h-full object-cover opacity-20 z-0 pointer-events-none",alt:"","aria-hidden":"true"}),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:"var(--instagram-gradient)"}}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-4",children:l("search.title")}),e.jsx("p",{className:"text-xl text-[var(--text-secondary)] max-w-2xl mx-auto mb-8",children:l("search.subtitle")})]}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx(_,{variant:"large",autoFocus:!0,showSuggestions:!0})}),!n&&e.jsx("div",{className:"max-w-2xl mx-auto mt-6",children:e.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-xl p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 text-[var(--text-primary)] flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ðŸ’¡"}),l("search.searchTips")]}),e.jsxs("div",{className:"space-y-2 text-sm text-[var(--text-secondary)]",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[var(--primary-color)]",children:"â€¢"}),e.jsx("span",{children:l("search.searchInstructions.keyword")})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[var(--primary-color)]",children:"â€¢"}),e.jsx("span",{children:l("search.searchInstructions.tags")})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[var(--primary-color)]",children:"â€¢"}),e.jsx("span",{children:l("search.searchInstructions.location")})]})]})]})}),e.jsx("div",{className:"max-w-3xl mx-auto mt-6",children:e.jsx(Z,{compact:!1})})]})})]}),e.jsx("section",{className:"section bg-[var(--bg-primary)]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"bg-[var(--bg-primary)] rounded-xl",children:e.jsx(ee,{})})})})})]})};export{ce as default};
