import{u as A,a as N,j as e,b as E,c as F,r as l,e as P}from"./index-DfMN3-aJ.js";import{P as o}from"./PillButton-BsyFwxq2.js";import{T as U,U as g}from"./UnifiedCard-B8ObpB9_.js";import{p as O}from"./random-DoZnV0pN.js";const C=({maxTags:a,onTagClick:r,showCount:i=!1,size:x="medium",tags:n,title:h})=>{const{popularTags:b,tagCounts:j}=A(),{t:y}=N(),c=n||b,u=a?c.slice(0,a):c;return u.length===0?e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-[var(--text-secondary)]",children:"タグがありません"})}):e.jsxs("div",{className:"mb-5",children:[h&&e.jsx("h3",{className:"mb-4 flex items-center gap-2 text-lg font-semibold text-[var(--text-primary)]",children:h}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"flex min-w-max gap-2 pb-2",children:[u.map(d=>e.jsx(U,{tag:d,count:i?j[d]:void 0,size:x,onClick:r},d)),a&&c.length>a&&e.jsxs("button",{className:"rounded-full border border-[var(--border-color)] bg-[var(--bg-secondary)] px-3 py-2 text-xs text-[var(--text-secondary)] transition-all duration-200 hover:border-[var(--primary-color)] hover:bg-[var(--bg-tertiary)] hover:text-[var(--primary-color)]",children:[y("tags.showMore")," (",c.length-a,"+)"]})]})})]})},R=P,v=a=>{const r={date:a.date||"",description:"",id:a.id,imageUrl:a.imageUrl,location:a.location,tags:a.tags,time:a.time||"",title:a.title};switch(a.type){case"event":{const i=a;return{...r,dayAvailability:i.dayAvailability,duration:i.duration,organizer:i.organizer,showOnMap:i.showOnMap,showOnSchedule:i.showOnSchedule,type:"event"}}case"exhibit":return{...r,creator:a.creator,type:"exhibit"};case"stall":return{...r,organizer:"",products:[],type:"stall"};case"sponsor":return{...r,type:"sponsor",website:""};default:return{...r,dayAvailability:"day1",duration:0,organizer:"",showOnMap:!0,showOnSchedule:!0,type:"event"}}},B=a=>a.replace(/^\.?\/?images\//,"./images/"),H=()=>{const a=R.map(r=>r.imageUrl).filter(Boolean).map(B);return O(a)||""};function p(a){return a*.08}const K=()=>{const{t:a}=N(),{events:r,exhibits:i,getPopularTags:x,stalls:n}=E(),h=F(),[b,j]=l.useState([]),[y,c]=l.useState([]),[u,d]=l.useState([]),[w,D]=l.useState({}),[T,k]=l.useState([]),[f,S]=l.useState([]),z=l.useMemo(()=>H(),[]),I=t=>{h(`/search?tag=${encodeURIComponent(t)}`)};l.useEffect(()=>{const t=[...new Set([...r,...i,...n].map(s=>s.date||""))].filter(s=>s!=="").sort((s,m)=>s.localeCompare(m));S(t)},[r,i,n]),l.useEffect(()=>{const t=[...r,...i,...n],s={};for(const m of f)s[m]=t.filter($=>$.date===m).map(v);D(s)},[r,i,n,f]),l.useEffect(()=>{j(r.slice(0,3).map(v)),c(i.slice(0,3).map(v)),d(n.slice(0,3).map(v)),k(x(8))},[r,i,n,x]);const M=t=>new Date(t).toLocaleDateString(a("language")==="ja"?"ja-JP":"en-US",{day:"numeric",month:"long",weekday:"long",year:"numeric"});return e.jsxs("div",{className:"scrollbar-thin min-h-screen bg-[var(--bg-primary)]",children:[e.jsx("section",{className:"bg-[var(--bg-primary)] py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-4 text-3xl font-bold text-[var(--text-primary)] md:text-4xl lg:text-5xl",children:a("siteName")}),e.jsx("p",{className:"mx-auto mb-6 max-w-3xl text-lg text-[var(--text-secondary)] md:text-xl",children:a("home.subtitle")})]}),e.jsx("div",{className:"ticket-preview mb-8",children:e.jsx("div",{className:"mx-auto max-w-5xl",children:e.jsx("img",{src:"./assets/ticket.png",alt:"高専祭2025 チケット",className:"h-auto w-full"})})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(o,{to:"/schedule",variant:"secondary",size:"lg",className:"border border-[var(--border-color)] bg-[var(--bg-secondary)] text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)]",children:a("home.viewSchedule")})})]})}),e.jsx("section",{className:"section bg-[var(--bg-primary)]",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsx("h2",{className:"section-title flex items-center gap-3 text-[var(--text-primary)]",children:a("home.events")}),e.jsx(o,{to:"/events",variant:"secondary",children:a("home.viewAll")})]}),e.jsx("div",{className:"mx-auto grid max-w-7xl grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map((t,s)=>e.jsx("div",{className:"animate-card-enter",style:{animationDelay:`${p(s)}s`,animationFillMode:"both"},children:e.jsx(g,{item:t,variant:"default",showTags:!0,showDescription:!0})},`home-events-${t.id}`))})]})}),e.jsx("section",{className:"section rounded-lg bg-[var(--bg-secondary)]",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsx("h2",{className:"section-title flex items-center gap-3 text-[var(--text-primary)]",children:a("home.exhibits")}),e.jsx(o,{to:"/exhibits",variant:"secondary",children:a("home.viewAll")})]}),e.jsx("div",{className:"mx-auto grid max-w-7xl grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:y.map((t,s)=>e.jsx("div",{className:"animate-card-enter",style:{animationDelay:`${p(s)}s`,animationFillMode:"both"},children:e.jsx(g,{item:t,variant:"default",showTags:!0,showDescription:!0})},`home-exhibits-${t.id}`))})]})}),e.jsx("section",{className:"section bg-[var(--bg-primary)]",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsx("h2",{className:"section-title flex items-center gap-3 text-[var(--text-primary)]",children:a("home.stalls")}),e.jsx(o,{to:"/stalls",variant:"secondary",children:a("home.viewAll")})]}),e.jsx("div",{className:"mx-auto grid max-w-7xl grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map((t,s)=>e.jsx("div",{className:"animate-card-enter",style:{animationDelay:`${p(s)}s`,animationFillMode:"both"},children:e.jsx(g,{item:t,variant:"default",showDescription:!0,showTags:!0})},`home-stalls-${t.id}`))})]})}),e.jsx("section",{className:"section rounded-lg bg-[var(--bg-secondary)]",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("h2",{className:"section-title mb-8 text-center text-[var(--text-primary)]",children:a("home.popularTags")}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx(C,{tags:T,showCount:!0,onTagClick:I})})]})}),e.jsx("section",{className:"section bg-[var(--bg-primary)]",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("h2",{className:"section-title mb-12 text-center text-[var(--text-primary)]",children:a("home.timeline")}),e.jsx("div",{className:"space-y-12",children:f.map(t=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-8 flex items-center justify-center",children:e.jsx("div",{className:"rounded-full px-6 py-3 text-base font-semibold text-white shadow-lg",style:{background:"var(--instagram-gradient)"},children:M(t)})}),e.jsx("div",{className:"flex snap-x snap-mandatory gap-6 overflow-x-auto pb-2",children:(w[t]||[]).map((s,m)=>e.jsx("div",{className:"animate-card-enter w-72 flex-shrink-0 snap-start",style:{animationDelay:`${p(m)}s`,animationFillMode:"both"},children:e.jsx(g,{item:s,variant:"default",showTags:!0,showDescription:!0})},`home-timeline-${t}-${s.id}`))}),(w[t]||[]).length>8&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(o,{to:"/schedule",variant:"secondary",className:"text-[var(--primary-color)] hover:bg-[var(--bg-tertiary)]",children:[a("home.viewAll")," (+",(w[t]||[]).length-8,")"]})})]},t))})]})}),e.jsxs("section",{className:"relative overflow-hidden rounded-tl-lg rounded-tr-lg",children:[e.jsx("img",{src:z,className:"pointer-events-none absolute inset-0 z-0 h-full w-full object-cover opacity-25",alt:"","aria-hidden":"true"}),e.jsx("div",{className:"absolute inset-0 z-10 opacity-50",style:{background:"var(--instagram-gradient)"}}),e.jsx("div",{className:"absolute inset-0 z-20 bg-black/5"}),e.jsx("div",{className:"relative z-30 mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6 text-center text-white",children:[e.jsx("h2",{className:"text-3xl font-bold md:text-4xl",children:a("home.ctaTitle")}),e.jsx("p",{className:"mx-auto max-w-2xl text-xl text-white/90",children:a("home.ctaDescription")}),e.jsxs("div",{className:"flex flex-col justify-center gap-4 px-8 sm:flex-row",children:[e.jsx(o,{to:"/map",variant:"secondary",size:"lg",className:"mx-auto w-60 truncate bg-white font-semibold text-gray-900 shadow-lg hover:bg-gray-50 sm:mx-0",children:a("home.viewMap")}),e.jsx(o,{to:"/bookmarks",variant:"secondary",size:"lg",className:"mx-auto w-60 truncate border border-white/30 bg-white/10 text-white hover:bg-white/20 sm:mx-0",children:a("home.viewBookmarks")})]})]})})]})]})};export{K as default};
