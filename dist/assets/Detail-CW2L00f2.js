import{f as T,a as E,g as P,h as U,r as t,i as v,s as g,c as u,e as b,j as e}from"./index-7WYLCOyL.js";import{I as $,T as z,U as F}from"./UnifiedCard-BIaf6bta.js";import{P as L}from"./PillButton-DxrKPZKU.js";import{V as M}from"./VectorMap-BfRFOU3z.js";const W=()=>{const{type:c,id:o}=T(),{t:r}=E(),{isBookmarked:i,toggleBookmark:j}=P(),f=U(),[s,N]=t.useState(null),[k,n]=t.useState(!0),[w,d]=t.useState(null),[p,C]=t.useState([]);t.useEffect(()=>{if(n(!0),d(null),!c||!o){d("Missing type or ID"),n(!1);return}let a;switch(c){case"event":a=b.find(l=>l.id===o);break;case"exhibit":a=u.find(l=>l.id===o);break;case"stall":a=g.find(l=>l.id===o);break;case"sponsor":a=v.find(l=>l.id===o);break;default:d(`Invalid type: ${c}`),n(!1);return}if(a){if(N(a),a.tags&&a.tags.length>0){const m=[...b,...u,...g,...v].filter(x=>x.id!==a.id&&x.tags&&x.tags.some(S=>{var y;return(y=a.tags)==null?void 0:y.includes(S)})).slice(0,6);C(m)}}else d(`Item not found: ${o}`);n(!1)},[c,o]);const h=()=>{f(-1)},I=()=>{s&&j(s.id)};if(k)return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg",style:{color:"var(--color-text-primary)"},children:r("loading")})})})});if(w||!s)return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-bg-primary)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg mb-6",style:{color:"var(--color-text-primary)"},children:r("errors.itemNotFound")}),e.jsx("button",{onClick:h,className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:scale-105",style:{backgroundColor:"var(--color-accent)",color:"white"},children:r("detail.back")})]})})});const B=()=>{switch(s.type){case"event":{const a=s;return e.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.eventDetails")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.organizer"),":"]}),e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:a.organizer})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.duration"),":"]}),e.jsxs("span",{style:{color:"var(--color-text-secondary)"},children:[Math.floor(a.duration/60)," hr"," ",a.duration%60," min"]})]})]})]})}case"exhibit":{const a=s;return e.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.exhibitDetails")}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.creator"),":"]}),e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:a.creator})]})})]})}case"stall":{const a=s;return e.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.stallDetails")}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.products"),":"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.products.map((l,m)=>e.jsx("span",{className:"px-2 py-1 rounded text-sm",style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text-secondary)"},children:l},m))})]})})]})}case"sponsor":{const a=s;return e.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.sponsorDetails")}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.website"),":"]}),e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"var(--color-accent)"},children:a.website})]})})]})}default:return null}},D=()=>{switch(s.type){case"event":return r("detail.event");case"exhibit":return r("detail.exhibit");case"stall":return r("detail.stall");case"sponsor":return r("detail.sponsor");default:return""}};return e.jsx("div",{className:"min-h-screen",children:e.jsx("section",{className:"section",style:{backgroundColor:"var(--color-bg-primary)"},children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs(L,{onClick:h,variant:"secondary",children:["← ",r("detail.back")]}),e.jsx("button",{onClick:I,className:`w-12 h-12 flex items-center justify-center rounded-full transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 ${i(s.id)?"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:bg-[var(--bg-tertiary)] hover:text-[var(--text-primary)] border border-[var(--border-color)] focus:ring-[var(--primary-color)]"}`,"aria-label":i(s.id)?r("actions.removeBookmark"):r("actions.bookmark"),title:i(s.id)?r("actions.removeBookmark"):r("actions.bookmark"),children:e.jsx("span",{className:"text-xl",children:i(s.id)?"★":"☆"})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx($,{type:s.type,size:"large"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:"var(--color-accent)",color:"white"},children:D()})]}),e.jsx("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--color-text-primary)"},children:s.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.date"),":"]}),e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.time"),":"]}),e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--color-text-primary)"},children:[r("detail.location"),":"]}),e.jsx("span",{style:{color:"var(--color-text-secondary)"},children:s.location})]})]}),s.imageUrl&&e.jsx("div",{className:"rounded-lg overflow-hidden bg-white/5 border border-white/10",children:e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover",style:{backgroundColor:"var(--color-bg-secondary)"}})}),e.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:r("detail.location")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg",style:{color:"var(--color-text-primary)"},children:s.location}),s.coordinates&&e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)"},children:["座標: (",s.coordinates.x.toFixed(0),","," ",s.coordinates.y.toFixed(0),")"]})]})]}),e.jsx("div",{className:"p-6 rounded-lg",style:{backgroundColor:"var(--color-bg-secondary)"},children:e.jsx("p",{className:"text-lg leading-relaxed",style:{color:"var(--color-text-primary)"},children:s.description})}),B(),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.tags")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((a,l)=>e.jsx(z,{tag:a},l))})]}),(s.location||s.coordinates)&&s.type!=="sponsor"&&e.jsxs("div",{className:"rounded-lg p-6 bg-white/10 border border-white/20",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",style:{color:"var(--color-text-primary)"},children:r("map.title")}),e.jsx("div",{className:"map-container h-64 rounded-lg overflow-hidden",children:e.jsx(M,{mode:"detail",highlightPoint:s.coordinates,points:s.coordinates?[{id:s.id,coordinates:s.coordinates,title:s.title,type:s.type,isSelected:!0,isHovered:!1,contentItem:s,onClick:()=>{},onHover:()=>{}}]:[],height:"100%",maxZoom:8,minZoom:.3,showControls:!0},`detail-map-${s.id}`)})]}),p.length>0&&e.jsxs("div",{className:"p-6 rounded-lg  bg-white/10 border border-white/20",style:{backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--color-text-primary)"},children:r("detail.related")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"flex gap-4 pb-2",style:{minWidth:"max-content"},children:p.map(a=>e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx(F,{item:a,showTags:!0,variant:"compact"})},a.id))})})]})]})]})})})};export{W as default};
